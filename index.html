<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Manager - Restaurant Inventory</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📦 Stock Manager</h1>
            <p>Restaurant Inventory System</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('inventory')">📋 Inventory</button>
            <button class="nav-tab" onclick="showTab('manage')">⚙️ Manage</button>
            <button class="nav-tab" onclick="showTab('reports')">📊 Reports</button>
        </div>

        <div class="tab-content">
            <!-- Inventory Tab -->
            <div id="inventory" class="tab-pane active">
                <input type="text" class="search-bar" id="searchInput" placeholder="🔍 Search items..." onkeyup="filterItems()">
                
                <div class="category-filter">
                    <button class="filter-btn active" onclick="filterByCategory('all')">All</button>
                    <button class="filter-btn" onclick="filterByCategory('powder')">🥤 Powder</button>
                    <button class="filter-btn" onclick="filterByCategory('syrup')">🍯 Syrup</button>
                    <button class="filter-btn" onclick="filterByCategory('coffee')">☕ Coffee</button>
                    <button class="filter-btn" onclick="filterByCategory('tea')">🍵 Tea</button>
                    <button class="filter-btn" onclick="filterByCategory('addon')">🧊 Add-on</button>
                    <button class="filter-btn" onclick="filterByCategory('others')">📦 Others</button>
                </div>

                <div id="stockList"></div>
                
                <div id="emptyInventory" class="empty-state hidden">
                    <h3>No items yet</h3>
                    <p>Add your first stock item in the Manage tab</p>
                </div>
            </div>

            <!-- Manage Tab -->
            <div id="manage" class="tab-pane">
                <div class="add-item-form">
                    <h3 style="margin-bottom: 15px;">➕ Add New Item</h3>
                    
                    <div class="form-group">
                        <label>Item Name</label>
                        <input type="text" id="itemName" placeholder="e.g., Coca Cola, Tomatoes">
                    </div>
                    
                    <div class="form-group">
                        <label>Category</label>
                        <select id="itemCategory">
                            <option value="powder">🥤 Powder</option>
                            <option value="syrup">🍯 Syrup</option>
                            <option value="coffee">☕ Coffee</option>
                            <option value="tea">🍵 Tea</option>
                            <option value="addon">🧊 Add-on</option>
                            <option value="others">📦 Others</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Unit</label>
                        <input type="text" id="itemUnit" placeholder="e.g., bottles, kg, pieces">
                    </div>
                    
                    <div class="form-group">
                        <label>Minimum Stock Alert</label>
                        <input type="number" id="itemMinStock" placeholder="10" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label>Maximum Stock Alert</label>
                        <input type="number" id="itemMaxStock" placeholder="100" min="0">
                    </div>
                    
                    <button class="btn btn-primary" onclick="addNewItem()">Add Item</button>
                </div>

                <div class="export-section">
                    <h3>🔄 Weekly Sync</h3>
                    <p style="margin: 10px 0; font-size: 14px; color: #666;">
                        <strong>Managers:</strong> Export master inventory to share with staff<br>
                        <strong>Staff:</strong> Import weekly master file to sync your app
                    </p>
                    
                    <div style="margin-bottom: 15px;">
                        <button class="btn btn-primary" onclick="exportMasterInventory()" style="width: 100%;">
                            📤 Export Master Inventory
                        </button>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">
                            Share this file with all staff via WhatsApp/Email
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <input type="file" id="importFile" accept=".csv" style="display: none;" onchange="importMasterData()">
                        <button class="btn btn-warning" onclick="document.getElementById('importFile').click()" style="width: 100%;">
                            📥 Import Master Inventory
                        </button>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">
                            Import the weekly master file from manager
                        </p>
                    </div>
                    
                    <div style="border-top: 1px solid #ddd; padding-top: 15px;">
                        <h4 style="margin-bottom: 10px;">🔧 Data Management</h4>
                        <button class="btn btn-secondary" onclick="exportCurrentData()">Export Current Data</button>
                        <button class="btn btn-secondary" onclick="importBackupData()">Import Backup</button>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h3>🗑️ Danger Zone</h3>
                    <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-pane">
                <div class="stats-card">
                    <div class="stats-number" id="totalItems">0</div>
                    <div class="stats-label">Total Items</div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                    <div class="stats-card" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24);">
                        <div class="stats-number" id="lowStockItems">0</div>
                        <div class="stats-label">Low Stock</div>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                        <div class="stats-number" id="okStockItems">0</div>
                        <div class="stats-label">In Stock</div>
                    </div>
                </div>

                <div id="reportsList">
                    <h3>📋 Shopping List</h3>
                    <div id="shoppingList"></div>
                </div>

                <button class="btn btn-secondary" onclick="copyBuyingList()" style="width: 100%; margin-top: 10px;">
                    📋 Copy Buying List
                </button>

                <button class="btn btn-primary" onclick="generateReport()" style="width: 100%; margin-top: 20px;">
                    📄 Generate Weekly Report
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
